#!/bin/bash

DESIRED_PATH=$1

if ! [ -d "$DESIRED_PATH" ]; then
    echo "Provided path is not a valid directory"
    exit 1;
fi

CLEAN_NAME=$(basename $DESIRED_PATH)

if [ -z "$2" ]; then
    SESSION_NAME=$CLEAN_NAME
else
    SESSION_NAME=$2
fi

if ! tmux has-session -t $SESSION_NAME 2>/dev/null; then
    tmux new-session -ds $SESSION_NAME -c $DESIRED_PATH
    echo "Created new session $SESSION_NAME"
fi
tmux switch-client -t $SESSION_NAME
echo "Switched to session $SESSION_NAME"
